(function(t,e){typeof exports==="object"&&typeof module!=="undefined"?e(exports,require("mithril"),require("mithril/stream"),require("lodash"),require("@sdxmessaging/ui-widgets"),require("pusher-js"),require("ag-grid-community")):typeof define==="function"&&define.amd?define(["exports","mithril","mithril/stream","lodash","@sdxmessaging/ui-widgets","pusher-js","ag-grid-community"],e):(t=typeof globalThis!=="undefined"?globalThis:t||self,e(t.uiBuilder={},t.m,t.m.stream,t._,t.uiWidgets,t.Pusher,t.agGrid))})(this,(function(t,e,n,r,a,i,o){"use strict";function u(t){return t&&typeof t==="object"&&"default"in t?t:{default:t}}var s=u(e);var d=u(n);var c=u(r);var l=u(i);var f={bind:function(){return null}};function h(t){var e=t.mock,n=t.apiKey,r=t.cloudChannel,a=t.companyChannel,i=t.userChannel,o=t.applicationChannel,u=t.applicationUserChannel;if(e){return{pusher:{connection:{bind:function(t,e){return setImmediate(e)},unbind:function(){return null}}},cloudChannel:f,companyChannel:f,userChannel:f,applicationChannel:f,applicationUserChannel:f}}var s=new l["default"](n,{cluster:"eu"});return{pusher:s,cloudChannel:s.subscribe(r),companyChannel:s.subscribe(a),userChannel:s.subscribe(i),applicationChannel:s.subscribe(o),applicationUserChannel:s.subscribe(u)}}var g=b;var m={};function v(t){c["default"].assign(m,{company:"",copyright:"",tel:"",email:"",address:"",poweredBy:undefined,header:[{type:0},{type:7}],footer:[{type:9},{type:0},{type:8},{type:0},{type:10},{type:6}]},t)}var p={button:"",gridFlex:"",cardFlex:"",cardHeader:"",cardSubheading:"",cardIcon:"",cardImage:"",cardCounter:"",loginForm:""};function w(t){var e=t.layoutBackground,n=e===void 0?"transparent":e,r=t.layoutLMaxWidth,i=r===void 0?"64rem":r,o=t.layoutLShadow,u=o===void 0?"unset":o,s=t.bodyText,d=s===void 0?"#333333":s,l=t.bodyFontSize,f=l===void 0?"1.25rem":l,h=t.bodyFontWeight,m=h===void 0?"200":h,v=t.background,b=v===void 0?"DodgerBlue":v,w=t.highlight,y=w===void 0?"unset":w,x=t.text,C=x===void 0?"DodgerBlue":x,T=t.icon,k=T===void 0?C:T,M=t.altText,P=M===void 0?"white":M,S=t.logoMargin,B=S===void 0?"0.5rem":S,F=t.logoBackground,D=F===void 0?"transparent":F,O=t.logoBorderRadius,U=O===void 0?".25rem":O,W=t.headerHeight,H=W===void 0?"3rem":W,N=t.headerBackground,E=N===void 0?b:N,z=t.headerBorderBottom,I=z===void 0?"none":z,L=t.headerBorderRadius,j=L===void 0?"0px":L,q=t.headerText,Y=q===void 0?P:q,R=t.subheadingText,A=R===void 0?"rgba(0,0,0,.5)":R,G=t.cardStyle,X=G===void 0?{}:G,Q=t.cardHeight,_=Q===void 0?"12em":Q,$=t.cardWidth,J=$===void 0?"12em":$,K=t.cardHeightNs,V=K===void 0?_:K,Z=t.cardWidthNs,tt=Z===void 0?J:Z,et=t.cardText,nt=et===void 0?P:et,rt=t.cardBackground,at=rt===void 0?b:rt,it=t.cardBorderRadius,ot=it===void 0?"0px":it,ut=t.cardShadow,st=ut===void 0?"unset":ut,dt=t.cardHeaderStyle,ct=dt===void 0?{}:dt,lt=t.cardHeaderFontSize,ft=lt===void 0?"1.25rem":lt,ht=t.cardSubheadingStyle,gt=ht===void 0?{}:ht,mt=t.cardSubheadingFontSize,vt=mt===void 0?"1.25rem":mt,pt=t.cardIconStyle,bt=pt===void 0?{}:pt,wt=t.cardImageStyle,yt=wt===void 0?{}:wt,xt=t.panelBackground,Ct=xt===void 0?"transparent":xt,Tt=t.panelBorderRadius,kt=Tt===void 0?".25rem":Tt,Mt=t.loginStyle,Pt=Mt===void 0?{}:Mt,St=t.footerHeight,Bt=St===void 0?"3rem":St,Ft=t.footerBackground,Dt=Ft===void 0?"#F4F4F4":Ft,Ot=t.footerText,Ut=Ot===void 0?"#999":Ot,Wt=t.lineHeight,Ht=Wt===void 0?"1.9em":Wt,Nt=t.buttonBackground,Et=Nt===void 0?b:Nt,zt=t.buttonText,It=zt===void 0?P:zt,Lt=t.buttonPadding,jt=Lt===void 0?".5rem":Lt,qt=t.buttonBorder,Yt=qt===void 0?"none":qt,Rt=t.buttonBorderRadius,At=Rt===void 0?".25rem":Rt,Gt=t.altButtonBackground,Xt=Gt===void 0?Et:Gt,Qt=t.altButtonText,_t=Qt===void 0?It:Qt,$t=t.altButtonPadding,Jt=$t===void 0?jt:$t,Kt=t.altButtonBorder,Vt=Kt===void 0?Yt:Kt,Zt=t.altButtonBorderRadius,te=Zt===void 0?At:Zt,ee=t.tableFontSize,ne=ee===void 0?f:ee,re=t.tableFontSizeNs,ae=re===void 0?f:re,ie=t.tableFontWeight,oe=ie===void 0?m:ie,ue=t.tableHeaderBackground,se=ue===void 0?b:ue,de=t.tableHeaderText,ce=de===void 0?P:de,le=t.tableHeaderFontWeight,fe=le===void 0?"400":le,he=t.tableRowText,ge=he===void 0?d:he,me=t.tableRowFontSize,ve=me===void 0?ne:me,pe=t.tableRowFontWeight,be=pe===void 0?m:pe,we=t.primaryBackground,ye=we===void 0?Et:we,xe=t.primaryText,Ce=xe===void 0?It:xe,Te=t.bgInfo,ke=Te===void 0?"#357EDD":Te,Me=t.txtInfo,Pe=Me===void 0?"#FFFFFF":Me,Se=t.bgWarn,Be=Se===void 0?"#FFD700":Se,Fe=t.txtWarn,De=Fe===void 0?"#111111":Fe,Oe=t.bgError,Ue=Oe===void 0?"#E7040F":Oe,We=t.txtError,He=We===void 0?"#FFFFFF":We,Ne=t.bgBasic,Ee=Ne===void 0?"#FFFFFF":Ne,ze=t.txtBasic,Ie=ze===void 0?d:ze,Le=t.inpBrdClass,je=Le===void 0?"bn":Le,qe=t.button,Ye=qe===void 0?"shadow-4":qe,Re=t.gridFlex,Ae=Re===void 0?"flex flex-wrap justify-center":Re,Ge=t.cardFlex,Xe=Ge===void 0?"flex flex-column items-center":Ge,Qe=t.cardHeader,_e=Qe===void 0?"flex-auto ma2 tc":Qe,$e=t.cardSubheading,Je=$e===void 0?"ma2 pv1 ph2":$e,Ke=t.cardIcon,Ve=Ke===void 0?"fal fa-fw fa-4x ma2":Ke,Ze=t.cardImage,tn=Ze===void 0?"img ma2":Ze,en=t.cardCounter,nn=en===void 0?"nt1 nr1 top-0 right-0":en,rn=t.loginForm,an=rn===void 0?"measure-wide center":rn;var on="screen and (min-width:30em)";var un="screen and (min-width:60em)";var sn=g;g.helper({hideInputClearButton:sn.$nest({"::-ms-clear":{display:"none",width:0,height:0},"::-webkit-search-cancel-button":{display:"none"}}),shrink0:sn.flexShrink("0"),sticky:sn({position:"sticky"}),safariBug:sn("-webkit-transform: translate3d(0, 0, 0)"),agGrid:sn.$nest(".ag-header",sn({background:se+" !important"})).$nest(".ag-tooltip-hiding",sn({opacity:"0"})),docOverlay:sn.$nest("input",sn({border:"none"})),bgBranding:sn({background:b}),branding:sn.color(C),icon:sn.color(k),brandingAlt:sn.color(P),ripple:sn({position:"relative",overflow:"hidden",transform:"translate3d(0, 0, 0)",":after":{content:"",display:"block",position:"absolute",width:"100%",height:"100%",top:0,left:0,"pointer-events":"none","background-image":"radial-gradient(circle, #fff 10%, transparent 10.01%)","background-repeat":"no-repeat","background-position":"50%",transform:"scale(10, 10)",opacity:"0",transition:"transform .5s, opacity 1s"},":active":{":after":{transform:"scale(0, 0)",opacity:.3,transition:"0s"}}}),pulse:sn({"-moz-osx-font-smoothing":"grayscale","backface-visibility":"hidden",transform:"scale(1)"}).$animate("1.2s ease-in-out infinite",{from:sn.transform("scale(1)"),"60%":sn.transform("scale(1.1)"),to:sn.transform("scale(1)")}),bgLayout:sn({background:n}),layoutL:sn.$media(un,sn({"max-width":i,"box-shadow":u})),body:sn({color:d,"font-size":f,"font-weight":m}),marginLogo:sn.m(B),bgLogo:sn({background:D}),brdLogo:sn.br(U),headerHeight:sn.h(H),bgHeader:sn({background:E}),bbHeader:sn({"border-bottom":I}),brdHeader:sn.br(j),header:sn.c(Y),subheading:sn.c(A),cardStyle:sn(X),cardSize:sn.h(_).w(J).$media(on,sn.h(V).w(tt)),card:sn.c(nt),bgCard:sn({background:at}),brdCard:sn.br(ot),shadowCard:sn({"box-shadow":st}),cardHead:sn(ct).fs(ft),cardSub:sn(gt).fs(vt),cardIcon:sn(bt),cardImage:sn(yt),bgPanel:sn({background:Ct}),brdPanel:sn.br(kt),loginStyle:sn(Pt),footerHeight:sn.h(Bt),bgFooter:sn({background:Dt}),footer:sn.c(Ut),inputHeight:sn.h(Ht),inputFocus:sn({":focus":{"border-color":y}}),active:sn({outline:"solid 0.125rem"}),tFont:sn({"font-size":ne,"font-weight":oe}).$media(on,sn({"font-size":ae})),bgThead:sn({background:se}),thead:sn({color:ce,"font-weight":fe}),tRow:sn({color:ge,"font-size":ve,"font-weight":be}),bgButton:sn({background:Et}),button:sn.c(It),padButton:sn.p(jt),brdButton:sn({border:Yt}).br(At),bgButtonAlt:sn({background:Xt}),buttonAlt:sn.c(_t),padButtonAlt:sn.p(Jt),brdButtonAlt:sn({border:Vt}).br(te),bgPrimary:sn({background:ye}),primary:sn.c(Ce),bgInfo:sn({background:ke}),info:sn.c(Pe),bgWarn:sn({background:Be}),warn:sn.c(De),bgError:sn({background:Ue}),error:sn.c(He),bgBasic:sn({background:Ee}),basic:sn.c(Ie)});c["default"].assign(p,{button:Ye,gridFlex:Ae,cardFlex:Xe,cardHeader:_e,cardSubheading:Je,cardIcon:Ve,cardImage:tn,cardCounter:nn,loginForm:an});a.updateTheme({icon:"fal",lblCol:g.branding.class,inpHgt:g.inputHeight.class,inpBrd:je+" "+g.inputFocus.class,btnBg:g.ripple.bgButton.class,btnCol:g.button.class,btnPad:g.padButton.class,btnBrd:p.button+" "+g.brdButton.class});a.updateButtonContext({alt:p.button+" "+g.bgButtonAlt.buttonAlt.padButtonAlt.brdButtonAlt.ripple.class,info:p.button+" "+sn({border:"1px solid "+Pe}).br(At).padButton.info.bgInfo.ripple.class,warn:p.button+" "+sn({border:"1px solid "+De}).br(At).padButton.warn.bgWarn.ripple.class,error:p.button+" "+sn({border:"1px solid "+He}).br(At).padButton.error.bgError.ripple.class})}var y=function(){function t(t){var e=t.brandingPath,n=t.themePath;this.branding=d["default"]({});this.theme=d["default"]({});this.brandingPath=e;this.branding.map(v);this.themePath=n;this.theme.map(w)}t.prototype.load=function(){return Promise.all([this.loadBranding(),this.loadTheme()])};t.prototype.loadBranding=function(){var t=this;return this.brandingPath?e.request(this.brandingPath).then((function(e){if(e.header&&!c["default"].isArray(e.header)){var n=e.header;e.header=[{type:13,logo:n.lhs},{type:0},{type:13,logo:n.rhs},{type:7}]}t.branding(e)})).catch(c["default"].noop):Promise.resolve()};t.prototype.loadTheme=function(){return this.themePath?e.request(this.themePath).then(this.theme).catch(c["default"].noop):Promise.resolve()};return t}();function x(t){if(c["default"].isString(t)){return e.request(t)}else{return Promise.resolve(t)}}function C(t,n){n({message:String(t.message),context:"error"});e.redraw()}function T(t,n){window.history.replaceState(null,"",window.location.href);var r;var i;var o;return x(t).then((function(t){r=t;a.updateConfig({signFont:"Caveat"});if(r.uiWidgets){a.updateConfig(r.uiWidgets)}i=new y(r);o=h(r.pusher);o.applicationUserChannel.bind("reload",(function(){return window.location.reload()}));o.applicationUserChannel.bind("redirect",(function(t){var e=t.url;return window.location.href=e}));o.cloudChannel.bind("reloadbranding",(function(){return i.load().then(e.redraw)}));o.companyChannel.bind("reloadbranding",(function(){return i.load().then(e.redraw)}));o.applicationChannel.bind("reloadbranding",(function(){return i.load().then(e.redraw)}));o.applicationUserChannel.bind("notification",(function(t){n(t);e.redraw()}));return Promise.all([i.load().catch(c["default"].noop),new Promise((function(t){o.pusher.connection.bind("connected",(function(){o.pusher.connection.unbind("connected");t()}))}))])})).catch((function(t){return C(t,n)})).then((function(){return{application:r,pusher:o}}))}function k(t){if(t===void 0){t="info"}switch(t){case"error":return g.bgError.error.class;case"warn":return g.bgWarn.warn.class;case"basic":return g.bgBasic.basic.class;default:return g.bgInfo.info.class}}function M(t){switch(t){case"bottom":return".bottom-0";default:return".top-0"}}function P(t){var e=t.context,n=t.type,r=t.message,a=t.duration,i=t.position,o=t.title;return{context:e||(!n||n==="notification"?"info":"basic"),type:n||"notification",message:r||"",title:o||"",duration:a||(!n||n==="notification"?3e3:0),position:i||(!n||n==="notification"?"top":"center")}}var S=function(){function t(){}t.prototype.view=function(t){var e=t.attrs,n=e.config,r=e.active;var a=n.message,i=n.context,o=n.title,u=n.position;return s["default"](".w-100.pa3.fixed.left-0.z-max.f5.tc.pointer"+M(u),{class:k(i),style:{transition:"transform 0.5s",transform:r()?"none":"translate(0, -100%)"},onclick:function(){return r(false)}},o,a)};return t}();var B=function(){function t(){this.active=d["default"](false)}t.prototype.oninit=function(t){var e=this;var n=t.attrs.notification;n.map((function(t){e.config=P(t);if(e.config.message||e.config.title){e.active(true);if(e.config.duration){setTimeout((function(){e.active(false);s["default"].redraw()}),e.config.duration)}}return d["default"].SKIP}))};t.prototype.view=function(){var t=this,e=t.config,n=t.active;if(e){switch(e.type){case"notification":return s["default"](S,{config:e,active:n})}}return null};return t}();function F(t){if(typeof t==="string"){return s["default"]("p",t)}else if(t.hasOwnProperty("selector")){var e=t;return s["default"](e.selector,e.content)}else{var n=t;return s["default"]("a.link.mv2.pa2.bn.br2.w-40.tc.dim.pointer"+g.bgButton.button,{href:n.href},n.text)}}var D=function(){function t(){}t.prototype.view=function(t){var e=t.attrs.data;return s["default"](".ph4",c["default"].map(e,(function(t){return F(t)})))};return t}();var O={};function U(t,e){if(t in O){throw new Error("Component "+t+" is already registered")}else{O[t]=e}}U("basic",D);function W(t){var e=t.type,n=t.data;if(e in O){return s["default"](O[e],{type:e,data:n})}else{return s["default"]("span","Unknown component type: "+e)}}function H(t){return c["default"].map(t,(function(t){return W(t)}))}var N=function(){function t(){}t.prototype.view=function(t){var e=t.attrs;if(e.hasOwnProperty("type")){return W(e)}else if(e.hasOwnProperty("icon")){var n=e;return s["default"](".flex.items-center.mh2",{class:n.classes},s["default"]("i.fal.fa-2x.mr2",{class:n.icon}),n.title)}else if(e.hasOwnProperty("src")){var r=e;return s["default"](".flex.items-center"+g.marginLogo.bgLogo.brdLogo,{class:r.classes},s["default"]("img.img",{src:r.src,class:r.imageClass,height:r.height,width:r.width}),r.title)}else{var a=e;return s["default"](".mh2",{class:a.classes},a.title||"")}};return t}();var E=function(){function t(){}t.prototype.view=function(t){var e=t.attrs,n=e.auth,r=n.logoutPath,a=n.logoutLabel,i=n.logoutIcon,o=i===void 0?"fa-sign-out-alt":i,u=e.classes;return s["default"]("a.link.ma2",{href:r,class:u},[a?s["default"]("span.mr2",a):null,s["default"]("i.fal.fa-fw.fa-2x[aria-hidden=true]",{class:o})])};return t}();function z(t){return(t*100).toFixed(0)+"%"}var I=function(){function t(){}t.prototype.view=function(t){var e=this;var n=t.attrs,r=n.navList,a=n.theme,i=n.application,o=i.name,u=i.version,d=i.auth,l=n.saving,f=n.progress,h=n.logout;var m=a==="header"?g.header:g.footer;var v=!(d&&h);var p=c["default"].filter(r,(function(t){return!(t.hideLogout&&v)}));return c["default"].map(p,(function(t){switch(t.type){case 0:return s["default"](".center");case 1:return s["default"]("span","|");case 2:return t.src?e.image(t.src,t.classes,t.height,t.width):null;case 3:return s["default"]("span.ma2"+m,{class:t.classes},t.text);case 4:return s["default"]("a.link.ma2"+m,{class:t.classes,href:t.href},t.text);case 5:return d&&h?e.logout(d,"flex "+m.class):null;case 6:return d&&h?e.logout(d,"flex dn-l "+m.class):null;case 7:return d&&h?e.logout(d,"dn flex-l "+m.class):null;case 8:return e.copyright(u);case 9:return e.poweredBy();case 10:return e.progressIndicator(l,f);case 11:return s["default"]("span.ma2.f7"+m,u);case 12:return s["default"]("span.ma2.f7"+m,o);case 13:return t.logo?s["default"](N,t.logo):null;default:return t.hasOwnProperty("data")?W(t):null}}))};t.prototype.image=function(t,e,n,r){return s["default"]("img.img.ma2",{src:t,class:e,height:n,width:r})};t.prototype.poweredBy=function(){var t=m.poweredBy,e=t===void 0?{src:"https://cloud.sdxmessaging.com/resources/sdx/poweredby.svg",title:"Powered by Secure Digital Exchange Limited",href:"https://www.sdxmessaging.com/"}:t;return s["default"]("a.link.ma2.h-75[target=_blank][rel=noreferrer noopener]",{href:e.href},s["default"]("img.w-100.h-100.mw3.mw4-l.o-80",{src:e.src,title:e.title}))};t.prototype.copyright=function(t){var e=m.copyright,n=e===void 0?"":e;return s["default"]("span.ma2.f7",{title:t},n?[s["default"].trust("&copy; "),n]:null)};t.prototype.progressIndicator=function(t,e){var n=t?t():false;var r=n&&e?e():0;return s["default"]("span.ma2.f3",{class:r?"":"dn"},[z(r),s["default"]("i.ma2.f3.fal.fa-spinner",{class:n?"fa-spin":"dn"})])};t.prototype.logout=function(t,e){return s["default"](E,{auth:t,classes:"items-center "+e})};return t}();var L=function(){function t(){}t.prototype.view=function(t){var e=t.attrs,n=e.application,r=e.notification,a=e.saving,i=e.progress,o=e.fullScreen,u=e.responsiveHeader,d=e.responsiveFooter,c=e.logout,l=c===void 0?true:c,f=e.header,h=e.footer,v=t.children;return[r?s["default"](B,{notification:r}):null,s["default"]("nav.items-center.self-center.w-100"+g.header.headerHeight.bgHeader.bbHeader.brdHeader.shrink0,{class:(u?"dn flex-l":"flex")+" "+(o?"":g.layoutL.class)},f?f:s["default"](I,{theme:"header",navList:m.header,application:n,saving:a,progress:i,logout:l})),s["default"]("main.flex-auto.flex.flex-column.self-center.w-100.h-100"+g.bgLayout.body,{class:o?undefined:g.layoutL.class},v),s["default"]("nav.w-100.items-center"+g.footerHeight.bgFooter.footer.shrink0,{class:d?"dn flex-l":"flex"},h?h:s["default"](I,{theme:"footer",navList:m.footer,application:n,saving:a,progress:i,logout:l}))]};return t}();var j=function(){function t(){}t.prototype.view=function(t){var e=t.attrs,n=e.header,r=e.headerClass,a=e.subheader,i=e.subheaderClass,o=e.content,u=e.wrapContent,d=u===void 0?true:u,c=e.footer;return[n?s["default"](".flex.justify-between.items-center"+g.shrink0.bgBranding.brandingAlt,{class:r},n):null,a?s["default"]("div"+g.shrink0,{class:i},a):null,d?s["default"](".flex-auto.overflow-x-hidden.overflow-y-auto"+g.safariBug,o):o,c]};return t}();var q,Y;var R=(q={},q["label"]=a.Label,q["trusted"]=a.TextareaInput,q["hidden"]=a.BaseInput,q["text"]=a.BaseInput,q["password"]=a.PasswordInput,q["search"]=a.BaseInput,q["date"]=a.BaseInput,q["time"]=a.BaseInput,q["datetime-local"]=a.BaseInput,q["dateInput"]=a.DateInput,q["cardDate"]=a.CardDateInput,q["number"]=a.BaseInput,q["range"]=a.BaseInput,q["email"]=a.BaseInput,q["url"]=a.BaseInput,q["tel"]=a.BaseInput,q["color"]=a.BaseInput,q["currency"]=a.CurrencyInput,q["textarea"]=a.TextareaInput,q["checkbox"]=a.CheckboxInput,q["select"]=a.SelectInput,q["radio"]=a.RadioInput,q);var A=(Y={},Y["fileMulti"]=a.FileMulti,Y["file"]=a.FileSelect,Y["imageMulti"]=a.ImageMulti,Y["image"]=a.ImageSelect,Y["sign"]=a.SignBuilder,Y);var G={};c["default"].forEach(R,(function(t,e){return G[e]=1}));c["default"].forEach(A,(function(t,e){return G[e]=2}));function X(t){if(A.hasOwnProperty(t)){return A[t]}else{return A["file"]}}function Q(t){if(R.hasOwnProperty(t)){return R[t]}else{return R["text"]}}function _(t,e){return t===2?X(e):t===1?Q(e):undefined}function $(t){return G[t]||3}function J(t){if(t===null||t===true||t===false){return NaN}var e=Number(t);if(isNaN(e)){return e}return e<0?Math.ceil(e):Math.floor(e)}function K(t,e){if(e.length<t){throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}}function V(t){K(1,arguments);var e=Object.prototype.toString.call(t);if(t instanceof Date||typeof t==="object"&&e==="[object Date]"){return new Date(t.getTime())}else if(typeof t==="number"||e==="[object Number]"){return new Date(t)}else{if((typeof t==="string"||e==="[object String]")&&typeof console!=="undefined"){console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule");console.warn((new Error).stack)}return new Date(NaN)}}function Z(t,e){K(2,arguments);var n=V(t);var r=J(e);if(isNaN(r)){return new Date(NaN)}if(!r){return n}n.setDate(n.getDate()+r);return n}function tt(t,e){K(2,arguments);var n=V(t);var r=J(e);if(isNaN(r)){return new Date(NaN)}if(!r){return n}var a=n.getDate();var i=new Date(n.getTime());i.setMonth(n.getMonth()+r+1,0);var o=i.getDate();if(a>=o){return i}else{n.setFullYear(i.getFullYear(),i.getMonth(),a);return n}}function et(t,e){K(2,arguments);if(!e||typeof e!=="object")return new Date(NaN);var n="years"in e?J(e.years):0;var r="months"in e?J(e.months):0;var a="weeks"in e?J(e.weeks):0;var i="days"in e?J(e.days):0;var o="hours"in e?J(e.hours):0;var u="minutes"in e?J(e.minutes):0;var s="seconds"in e?J(e.seconds):0;var d=V(t);var c=r||n?tt(d,r+n*12):d;var l=i||a?Z(c,i+a*7):c;var f=u+o*60;var h=s+f*60;var g=h*1e3;var m=new Date(l.getTime()+g);return m}function nt(t,e){K(2,arguments);var n=V(t).getTime();var r=J(e);return new Date(n+r)}var rt=6e4;function at(t){return t.getTime()%rt}function it(t){var e=new Date(t.getTime());var n=Math.ceil(e.getTimezoneOffset());e.setSeconds(0,0);var r=n>0;var a=r?(rt+at(e))%rt:at(e);return n*rt+a}function ot(t){K(1,arguments);var e=V(t);return!isNaN(e)}var ut={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function st(t,e,n){n=n||{};var r;if(typeof ut[t]==="string"){r=ut[t]}else if(e===1){r=ut[t].one}else{r=ut[t].other.replace("{{count}}",e)}if(n.addSuffix){if(n.comparison>0){return"in "+r}else{return r+" ago"}}return r}function dt(t){return function(e){var n=e||{};var r=n.width?String(n.width):t.defaultWidth;var a=t.formats[r]||t.formats[t.defaultWidth];return a}}var ct={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"};var lt={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"};var ft={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"};var ht={date:dt({formats:ct,defaultWidth:"full"}),time:dt({formats:lt,defaultWidth:"full"}),dateTime:dt({formats:ft,defaultWidth:"full"})};var gt={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function mt(t,e,n,r){return gt[t]}function vt(t){return function(e,n){var r=n||{};var a=r.context?String(r.context):"standalone";var i;if(a==="formatting"&&t.formattingValues){var o=t.defaultFormattingWidth||t.defaultWidth;var u=r.width?String(r.width):o;i=t.formattingValues[u]||t.formattingValues[o]}else{var s=t.defaultWidth;var d=r.width?String(r.width):t.defaultWidth;i=t.values[d]||t.values[s]}var c=t.argumentCallback?t.argumentCallback(e):e;return i[c]}}var pt={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]};var bt={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]};var wt={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]};var yt={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]};var xt={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}};var Ct={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}};function Tt(t,e){var n=Number(t);var r=n%100;if(r>20||r<10){switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}}return n+"th"}var kt={ordinalNumber:Tt,era:vt({values:pt,defaultWidth:"wide"}),quarter:vt({values:bt,defaultWidth:"wide",argumentCallback:function(t){return Number(t)-1}}),month:vt({values:wt,defaultWidth:"wide"}),day:vt({values:yt,defaultWidth:"wide"}),dayPeriod:vt({values:xt,defaultWidth:"wide",formattingValues:Ct,defaultFormattingWidth:"wide"})};function Mt(t){return function(e,n){var r=String(e);var a=n||{};var i=r.match(t.matchPattern);if(!i){return null}var o=i[0];var u=r.match(t.parsePattern);if(!u){return null}var s=t.valueCallback?t.valueCallback(u[0]):u[0];s=a.valueCallback?a.valueCallback(s):s;return{value:s,rest:r.slice(o.length)}}}function Pt(t){return function(e,n){var r=String(e);var a=n||{};var i=a.width;var o=i&&t.matchPatterns[i]||t.matchPatterns[t.defaultMatchWidth];var u=r.match(o);if(!u){return null}var s=u[0];var d=i&&t.parsePatterns[i]||t.parsePatterns[t.defaultParseWidth];var c;if(Object.prototype.toString.call(d)==="[object Array]"){c=Bt(d,(function(t){return t.test(s)}))}else{c=St(d,(function(t){return t.test(s)}))}c=t.valueCallback?t.valueCallback(c):c;c=a.valueCallback?a.valueCallback(c):c;return{value:c,rest:r.slice(s.length)}}}function St(t,e){for(var n in t){if(t.hasOwnProperty(n)&&e(t[n])){return n}}}function Bt(t,e){for(var n=0;n<t.length;n++){if(e(t[n])){return n}}}var Ft=/^(\d+)(th|st|nd|rd)?/i;var Dt=/\d+/i;var Ot={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i};var Ut={any:[/^b/i,/^(a|c)/i]};var Wt={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i};var Ht={any:[/1/i,/2/i,/3/i,/4/i]};var Nt={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i};var Et={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]};var zt={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i};var It={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]};var Lt={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i};var jt={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}};var qt={ordinalNumber:Mt({matchPattern:Ft,parsePattern:Dt,valueCallback:function(t){return parseInt(t,10)}}),era:Pt({matchPatterns:Ot,defaultMatchWidth:"wide",parsePatterns:Ut,defaultParseWidth:"any"}),quarter:Pt({matchPatterns:Wt,defaultMatchWidth:"wide",parsePatterns:Ht,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:Pt({matchPatterns:Nt,defaultMatchWidth:"wide",parsePatterns:Et,defaultParseWidth:"any"}),day:Pt({matchPatterns:zt,defaultMatchWidth:"wide",parsePatterns:It,defaultParseWidth:"any"}),dayPeriod:Pt({matchPatterns:Lt,defaultMatchWidth:"any",parsePatterns:jt,defaultParseWidth:"any"})};var Yt={code:"en-US",formatDistance:st,formatLong:ht,formatRelative:mt,localize:kt,match:qt,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Rt(t,e){K(2,arguments);var n=J(e);return nt(t,-n)}function At(t,e){var n=t<0?"-":"";var r=Math.abs(t).toString();while(r.length<e){r="0"+r}return n+r}var Gt={y:function(t,e){var n=t.getUTCFullYear();var r=n>0?n:1-n;return At(e==="yy"?r%100:r,e.length)},M:function(t,e){var n=t.getUTCMonth();return e==="M"?String(n+1):At(n+1,2)},d:function(t,e){return At(t.getUTCDate(),e.length)},a:function(t,e){var n=t.getUTCHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":case"aaa":return n.toUpperCase();case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h:function(t,e){return At(t.getUTCHours()%12||12,e.length)},H:function(t,e){return At(t.getUTCHours(),e.length)},m:function(t,e){return At(t.getUTCMinutes(),e.length)},s:function(t,e){return At(t.getUTCSeconds(),e.length)},S:function(t,e){var n=e.length;var r=t.getUTCMilliseconds();var a=Math.floor(r*Math.pow(10,n-3));return At(a,e.length)}};var Xt=864e5;function Qt(t){K(1,arguments);var e=V(t);var n=e.getTime();e.setUTCMonth(0,1);e.setUTCHours(0,0,0,0);var r=e.getTime();var a=n-r;return Math.floor(a/Xt)+1}function _t(t){K(1,arguments);var e=1;var n=V(t);var r=n.getUTCDay();var a=(r<e?7:0)+r-e;n.setUTCDate(n.getUTCDate()-a);n.setUTCHours(0,0,0,0);return n}function $t(t){K(1,arguments);var e=V(t);var n=e.getUTCFullYear();var r=new Date(0);r.setUTCFullYear(n+1,0,4);r.setUTCHours(0,0,0,0);var a=_t(r);var i=new Date(0);i.setUTCFullYear(n,0,4);i.setUTCHours(0,0,0,0);var o=_t(i);if(e.getTime()>=a.getTime()){return n+1}else if(e.getTime()>=o.getTime()){return n}else{return n-1}}function Jt(t){K(1,arguments);var e=$t(t);var n=new Date(0);n.setUTCFullYear(e,0,4);n.setUTCHours(0,0,0,0);var r=_t(n);return r}var Kt=6048e5;function Vt(t){K(1,arguments);var e=V(t);var n=_t(e).getTime()-Jt(e).getTime();return Math.round(n/Kt)+1}function Zt(t,e){K(1,arguments);var n=e||{};var r=n.locale;var a=r&&r.options&&r.options.weekStartsOn;var i=a==null?0:J(a);var o=n.weekStartsOn==null?i:J(n.weekStartsOn);if(!(o>=0&&o<=6)){throw new RangeError("weekStartsOn must be between 0 and 6 inclusively")}var u=V(t);var s=u.getUTCDay();var d=(s<o?7:0)+s-o;u.setUTCDate(u.getUTCDate()-d);u.setUTCHours(0,0,0,0);return u}function te(t,e){K(1,arguments);var n=V(t,e);var r=n.getUTCFullYear();var a=e||{};var i=a.locale;var o=i&&i.options&&i.options.firstWeekContainsDate;var u=o==null?1:J(o);var s=a.firstWeekContainsDate==null?u:J(a.firstWeekContainsDate);if(!(s>=1&&s<=7)){throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively")}var d=new Date(0);d.setUTCFullYear(r+1,0,s);d.setUTCHours(0,0,0,0);var c=Zt(d,e);var l=new Date(0);l.setUTCFullYear(r,0,s);l.setUTCHours(0,0,0,0);var f=Zt(l,e);if(n.getTime()>=c.getTime()){return r+1}else if(n.getTime()>=f.getTime()){return r}else{return r-1}}function ee(t,e){K(1,arguments);var n=e||{};var r=n.locale;var a=r&&r.options&&r.options.firstWeekContainsDate;var i=a==null?1:J(a);var o=n.firstWeekContainsDate==null?i:J(n.firstWeekContainsDate);var u=te(t,e);var s=new Date(0);s.setUTCFullYear(u,0,o);s.setUTCHours(0,0,0,0);var d=Zt(s,e);return d}var ne=6048e5;function re(t,e){K(1,arguments);var n=V(t);var r=Zt(n,e).getTime()-ee(n,e).getTime();return Math.round(r/ne)+1}var ae={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"};var ie={G:function(t,e,n){var r=t.getUTCFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){var r=t.getUTCFullYear();var a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return Gt.y(t,e)},Y:function(t,e,n,r){var a=te(t,r);var i=a>0?a:1-a;if(e==="YY"){var o=i%100;return At(o,2)}if(e==="Yo"){return n.ordinalNumber(i,{unit:"year"})}return At(i,e.length)},R:function(t,e){var n=$t(t);return At(n,e.length)},u:function(t,e){var n=t.getUTCFullYear();return At(n,e.length)},Q:function(t,e,n){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return At(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return At(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){var r=t.getUTCMonth();switch(e){case"M":case"MM":return Gt.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){var r=t.getUTCMonth();switch(e){case"L":return String(r+1);case"LL":return At(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){var a=re(t,r);if(e==="wo"){return n.ordinalNumber(a,{unit:"week"})}return At(a,e.length)},I:function(t,e,n){var r=Vt(t);if(e==="Io"){return n.ordinalNumber(r,{unit:"week"})}return At(r,e.length)},d:function(t,e,n){if(e==="do"){return n.ordinalNumber(t.getUTCDate(),{unit:"date"})}return Gt.d(t,e)},D:function(t,e,n){var r=Qt(t);if(e==="Do"){return n.ordinalNumber(r,{unit:"dayOfYear"})}return At(r,e.length)},E:function(t,e,n){var r=t.getUTCDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){var a=t.getUTCDay();var i=(a-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return At(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){var a=t.getUTCDay();var i=(a-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return At(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(t,e,n){var r=t.getUTCDay();var a=r===0?7:r;switch(e){case"i":return String(a);case"ii":return At(a,e.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){var r=t.getUTCHours();var a=r/12>=1?"pm":"am";switch(e){case"a":case"aa":case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,e,n){var r=t.getUTCHours();var a;if(r===12){a=ae.noon}else if(r===0){a=ae.midnight}else{a=r/12>=1?"pm":"am"}switch(e){case"b":case"bb":case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,e,n){var r=t.getUTCHours();var a;if(r>=17){a=ae.evening}else if(r>=12){a=ae.afternoon}else if(r>=4){a=ae.morning}else{a=ae.night}switch(e){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){var r=t.getUTCHours()%12;if(r===0)r=12;return n.ordinalNumber(r,{unit:"hour"})}return Gt.h(t,e)},H:function(t,e,n){if(e==="Ho"){return n.ordinalNumber(t.getUTCHours(),{unit:"hour"})}return Gt.H(t,e)},K:function(t,e,n){var r=t.getUTCHours()%12;if(e==="Ko"){return n.ordinalNumber(r,{unit:"hour"})}return At(r,e.length)},k:function(t,e,n){var r=t.getUTCHours();if(r===0)r=24;if(e==="ko"){return n.ordinalNumber(r,{unit:"hour"})}return At(r,e.length)},m:function(t,e,n){if(e==="mo"){return n.ordinalNumber(t.getUTCMinutes(),{unit:"minute"})}return Gt.m(t,e)},s:function(t,e,n){if(e==="so"){return n.ordinalNumber(t.getUTCSeconds(),{unit:"second"})}return Gt.s(t,e)},S:function(t,e){return Gt.S(t,e)},X:function(t,e,n,r){var a=r._originalDate||t;var i=a.getTimezoneOffset();if(i===0){return"Z"}switch(e){case"X":return ue(i);case"XXXX":case"XX":return se(i);case"XXXXX":case"XXX":default:return se(i,":")}},x:function(t,e,n,r){var a=r._originalDate||t;var i=a.getTimezoneOffset();switch(e){case"x":return ue(i);case"xxxx":case"xx":return se(i);case"xxxxx":case"xxx":default:return se(i,":")}},O:function(t,e,n,r){var a=r._originalDate||t;var i=a.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+oe(i,":");case"OOOO":default:return"GMT"+se(i,":")}},z:function(t,e,n,r){var a=r._originalDate||t;var i=a.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+oe(i,":");case"zzzz":default:return"GMT"+se(i,":")}},t:function(t,e,n,r){var a=r._originalDate||t;var i=Math.floor(a.getTime()/1e3);return At(i,e.length)},T:function(t,e,n,r){var a=r._originalDate||t;var i=a.getTime();return At(i,e.length)}};function oe(t,e){var n=t>0?"-":"+";var r=Math.abs(t);var a=Math.floor(r/60);var i=r%60;if(i===0){return n+String(a)}var o=e||"";return n+String(a)+o+At(i,2)}function ue(t,e){if(t%60===0){var n=t>0?"-":"+";return n+At(Math.abs(t)/60,2)}return se(t,e)}function se(t,e){var n=e||"";var r=t>0?"-":"+";var a=Math.abs(t);var i=At(Math.floor(a/60),2);var o=At(a%60,2);return r+i+n+o}function de(t,e){switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}}function ce(t,e){switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}}function le(t,e){var n=t.match(/(P+)(p+)?/);var r=n[1];var a=n[2];if(!a){return de(t,e)}var i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",de(r,e)).replace("{{time}}",ce(a,e))}var fe={p:ce,P:le};var he=["D","DD"];var ge=["YY","YYYY"];function me(t){return he.indexOf(t)!==-1}function ve(t){return ge.indexOf(t)!==-1}function pe(t,e,n){if(t==="YYYY"){throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"))}else if(t==="YY"){throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"))}else if(t==="D"){throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"))}else if(t==="DD"){throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"))}}var be=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g;var we=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;var ye=/^'([^]*?)'?$/;var xe=/''/g;var Ce=/[a-zA-Z]/;function Te(t,e,n){K(2,arguments);var r=String(e);var a=n||{};var i=a.locale||Yt;var o=i.options&&i.options.firstWeekContainsDate;var u=o==null?1:J(o);var s=a.firstWeekContainsDate==null?u:J(a.firstWeekContainsDate);if(!(s>=1&&s<=7)){throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively")}var d=i.options&&i.options.weekStartsOn;var c=d==null?0:J(d);var l=a.weekStartsOn==null?c:J(a.weekStartsOn);if(!(l>=0&&l<=6)){throw new RangeError("weekStartsOn must be between 0 and 6 inclusively")}if(!i.localize){throw new RangeError("locale must contain localize property")}if(!i.formatLong){throw new RangeError("locale must contain formatLong property")}var f=V(t);if(!ot(f)){throw new RangeError("Invalid time value")}var h=it(f);var g=Rt(f,h);var m={firstWeekContainsDate:s,weekStartsOn:l,locale:i,_originalDate:f};var v=r.match(we).map((function(t){var e=t[0];if(e==="p"||e==="P"){var n=fe[e];return n(t,i.formatLong,m)}return t})).join("").match(be).map((function(n){if(n==="''"){return"'"}var r=n[0];if(r==="'"){return ke(n)}var o=ie[r];if(o){if(!a.useAdditionalWeekYearTokens&&ve(n)){pe(n,e,t)}if(!a.useAdditionalDayOfYearTokens&&me(n)){pe(n,e,t)}return o(g,n,i.localize,m)}if(r.match(Ce)){throw new RangeError("Format string contains an unescaped latin alphabet character `"+r+"`")}return n})).join("");return v}function ke(t){return t.match(ye)[1].replace(xe,"'")}var Me={full:"EEEE, d MMMM yyyy",long:"d MMMM yyyy",medium:"d MMM yyyy",short:"dd/MM/yyyy"};var Pe={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"};var Se={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"};var Be={date:dt({formats:Me,defaultWidth:"full"}),time:dt({formats:Pe,defaultWidth:"full"}),dateTime:dt({formats:Se,defaultWidth:"full"})};var Fe={code:"en-GB",formatDistance:st,formatLong:Be,formatRelative:mt,localize:kt,match:qt,options:{weekStartsOn:1,firstWeekContainsDate:4}};function De(t,e){if(e===void 0){e="P"}return Te(t,e,{locale:Fe})}var Oe={default:function(t){return t},"date-format":function(t){return t.map((function(t){return t?De(Number(t)):""}))},"date-format-month":function(t){return t.map((function(t){return t?De(Number(t),"dd MMMM yyyy"):""}))},"date-endofday":function(t){return t.map((function(t){return t?et(new Date(t),{hours:23,minutes:59,seconds:59}).toISOString():""}))},upper:function(t){return t.map((function(t){return String(t).toUpperCase()}))},lower:function(t){return t.map((function(t){return String(t).toLowerCase()}))},snake:function(t){return t.map((function(t){return c["default"].snakeCase(String(t))}))},trunc:function(t){return t.map((function(t){return c["default"].truncate(String(t),{length:15})}))},boolean:function(t){return t.map((function(t){return Boolean(t)}))}};function Ue(t,e){if(Oe.hasOwnProperty(t)){return Oe[t](e)}else{return Oe["default"](e)}}function We(t,e){if(!Oe.hasOwnProperty(t)){Oe[t]=e}}var He={default:function(t){return t.map((function(t){return c["default"].map(t,(function(t){var e=t.name;return e})).join()}))},"file-name":function(t){return t.map((function(t){return c["default"].map(t,(function(t){var e=t.file;return e?e.name:""})).join()}))},"file-type":function(t){return t.map((function(t){return c["default"].map(t,(function(t){var e=t.file;return e?e.type:""})).join()}))},"file-size":function(t){return t.map((function(t){return c["default"].map(t,(function(t){var e=t.file;return e?e.size:""})).join()}))},"file-lastmodified":function(t){return t.map((function(t){return c["default"].map(t,(function(t){var e=t.file;return e?e.lastModified:""})).join()}))},path:function(t){return t.map((function(t){return c["default"].map(t,(function(t){var e=t.path;return e})).join()}))},dataUrl:function(t){return t.map((function(t){return c["default"].map(t,(function(t){var e=t.dataUrl;return e?e:""})).join()}))}};function Ne(t,e){if(He.hasOwnProperty(t)){return He[t](e)}else{return He["default"](e)}}function Ee(t,e){if(!He.hasOwnProperty(t)){He[t]=e}}var ze={default:function(t){return d["default"].merge(t).map((function(t){return t.join()}))},"join-space":function(t){return d["default"].merge(t).map((function(t){return t.join(" ")}))},"join-newline":function(t){return d["default"].merge(t).map((function(t){return t.join("\n")}))},"join-underscore":function(t){return d["default"].merge(t).map((function(t){return t.join("_")}))},sum:function(t){return d["default"].merge(t).map((function(t){return c["default"].reduce(t,(function(t,e){var n=Number.parseInt(String(e));return c["default"].isNaN(n)?t:t+n}),0)}))},product:function(t){return d["default"].merge(t).map((function(t){return c["default"].reduce(t,(function(t,e){var n=Number.parseInt(String(e));return c["default"].isNaN(n)?0:t*n}),1)}))},and:function(t){return d["default"].merge(t).map((function(t){return c["default"].reduce(t,(function(t,e){return t?e:0}),true)}))},or:function(t){return d["default"].merge(t).map((function(t){return c["default"].reduce(t,(function(t,e){return t||e?e:t}),0)}))}};function Ie(t,e){if(ze.hasOwnProperty(t)){return ze[t](e)}else{return ze["default"](e)}}function Le(t,e){if(!ze.hasOwnProperty(t)){ze[t]=e}}function je(t,e){return c["default"].map(c["default"].compact(c["default"].at(t,e)),(function(t){var e=t.value;return e}))}function qe(t,e,n){return c["default"].max(c["default"].map(e,(function(e){var r=c["default"].find(n,c["default"].matches({key:e}));return r&&r.computed?qe(t+1,r.computed.keys,n):t})))||0}function Ye(t){return c["default"].sortBy(t,(function(e){return qe(0,e.computed.keys,t)}))}function Re(t){var e=c["default"].groupBy(t,(function(t){return t.hasOwnProperty("computed")&&t.computed?"c":"b"})),n=e.b,r=e.c;var a={};c["default"].reduce(n,(function(t,e){var n=e.key,r=e.fileValue,a=e.input;var i=a&&a.type?$(a.type||"text"):3;if(i===1){t[n]={type:i,value:d["default"]()}}else if(i===2){var o=d["default"]([]);t[n]={type:i,value:Ne(r||"default",o),files:o}}return t}),a);var i=Ye(r);c["default"].reduce(i,(function(t,e){var n=e.key,r=e.computed,a=r.keys,i=r.map,o=i===void 0?"default":i,u=r.merge,s=u===void 0?"default":u;var d;if(a.length>1){var c=je(t,a);d=Ie(s,c)}else if(a.length===1){d=je(t,a)[0]}if(d){t[n]={type:1,value:Ue(o,d)}}return t}),a);var o=c["default"].filter(t,(function(t){return t.input?true:false}));return{fields:c["default"].map(o,(function(t){var e=t.key,n=t.group,r=t.input,i=t.data;var o=a[e];var u=o?o.type:3;return{key:e,group:n,input:r,type:u,data:i,widget:r?_(u,r.type||"text"):undefined,value:o?o.value:undefined,files:o&&o.type===2?o.files:undefined}})),streamMap:a}}function Ae(t,e){return e?c["default"].assign({},t,e):t}function Ge(t,e){var n=t.type,r=t.input,a=t.widget,i=t.value,o=t.files;if(n===2&&r&&a&&o){return s["default"](a,{field:Ae(r,e),value:o})}else if(n===1&&r&&a&&i){return s["default"](a,{field:Ae(r,e),value:i})}return null}var Xe=function(){function t(){this.elem=document.createElement("span")}t.prototype.init=function(t){var e=t.displayName;this.render(e)};t.prototype.getGui=function(){return this.elem};t.prototype.refresh=function(t){var e=t.displayName;this.render(e);return true};t.prototype.render=function(t){this.elem.className=g.tFont.thead.class+" truncate";this.elem.textContent=t};return t}();var Qe=function(){function t(){this.gridOptions={components:{agColumnHeader:Xe},suppressCellSelection:true,rowData:[],tooltipShowDelay:50}}t.prototype.oncreate=function(t){var e=this;var n;var r=t.dom,a=t.attrs,i=a.columnDefs,u=a.filter,s=a.test,d=a.load,c=a.columnAutoResize;this.gridOptions.columnDefs=i;this.gridOptions.context=u();this.gridOptions.isExternalFilterPresent=function(){return u().length>0};this.gridOptions.doesExternalFilterPass=s;this.gridOptions.rowClass=g.tRow.class;new o.Grid(r,this.gridOptions);if(c){this.gridOptions.onGridSizeChanged=function(){var t;return(t=e.gridOptions.api)===null||t===void 0?void 0:t.sizeColumnsToFit()};(n=this.gridOptions.api)===null||n===void 0?void 0:n.sizeColumnsToFit()}this.showLoading();d({offset:0,limit:-1}).then((function(t){var n;e.hideLoading();(n=e.gridOptions.api)===null||n===void 0?void 0:n.setRowData(t)}))};t.prototype.onupdate=function(t){var e=t.attrs.filter;if(this.gridOptions.context===e()){return}this.gridOptions.context=e();if(this.gridOptions.api){this.gridOptions.api.onFilterChanged();this.gridOptions.api.redrawRows()}};t.prototype.onremove=function(){var t;(t=this.gridOptions.api)===null||t===void 0?void 0:t.destroy()};t.prototype.view=function(){return s["default"](".h-100.ag-theme-alpine"+g.agGrid)};t.prototype.showLoading=function(){var t;(t=this.gridOptions.api)===null||t===void 0?void 0:t.showLoadingOverlay()};t.prototype.hideLoading=function(){var t;(t=this.gridOptions.api)===null||t===void 0?void 0:t.hideOverlay()};return t}();var _e=this&&this.__extends||function(){var t=function(e,n){t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n))t[n]=e[n]};return t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();function $e(t,e,n){return{getRows:function(r){var a=r.startRow,i=r.endRow,o=r.successCallback,u=r.failCallback;var s=i-a;e();t({offset:a,limit:s+1}).then((function(t){if(t.length>s){o(t.slice(0,s))}else{o(t,a+t.length)}})).catch(u).then((function(){return n()}))}}}var Je=function(t){_e(e,t);function e(){var e=t!==null&&t.apply(this,arguments)||this;e.gridOptions={components:{agColumnHeader:Xe},suppressCellSelection:true,rowModelType:"infinite",blockLoadDebounceMillis:400,tooltipShowDelay:50};return e}e.prototype.oncreate=function(t){var e=this;var n;var r=t.dom,a=t.attrs,i=a.columnDefs,u=a.filter,s=a.load,d=a.columnAutoResize;this.gridOptions.columnDefs=i;this.gridOptions.context=u();this.gridOptions.datasource=$e(s,c["default"].bind(this.showLoading,this),c["default"].bind(this.hideLoading,this));this.gridOptions.rowClass=g.tRow.class;new o.Grid(r,this.gridOptions);if(d){this.gridOptions.onGridSizeChanged=function(){var t;return(t=e.gridOptions.api)===null||t===void 0?void 0:t.sizeColumnsToFit()};(n=this.gridOptions.api)===null||n===void 0?void 0:n.sizeColumnsToFit()}};return e}(Qe);function Ke(t,e){var n=e.notification,r=n===void 0?d["default"]({message:""}):n,a=e.fullScreen,i=e.responsiveHeader,o=e.responsiveFooter,u=e.logout,c=e.wrapContent,l=e.customAttrs,f=e.header,h=e.central,g=e.footer;return T(t,r).then((function(t){var e=t.application,n=t.pusher;var d={application:e,custom:l};s["default"].mount(document.getElementById("page"),{view:function(){return s["default"](L,{application:e,notification:r,fullScreen:a,responsiveHeader:i,responsiveFooter:o,logout:u,header:f?s["default"](f,d):undefined,footer:g?s["default"](g,d):undefined},s["default"](j,{content:s["default"](h,d),wrapContent:c}))}});return{application:e,pusher:n}}))}t.PagingGrid=Je;t.SingleGrid=Qe;t.assembleFormField=Ge;t.buildComponent=W;t.buildComponentList=H;t.buildFormFields=Re;t.custom=Ke;t.getFileWidget=X;t.getPropWidget=Q;t.registerComponent=U;t.registerFileMapFn=Ee;t.registerMapFn=We;t.registerMergeFn=Le;Object.defineProperty(t,"__esModule",{value:true})}));
